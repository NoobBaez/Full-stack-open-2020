{"version":3,"sources":["services/login.js","services/blog.js","components/loginForm.js","components/blogForm.js","components/toggleVisibility.js","components/blog.js","components/blogList.js","components/alert.js","App.js","index.js"],"names":["login","credential","a","axios","post","response","data","token","getAll","get","request","create","blog","config","headers","Authorization","setToken","newToken","updateLikes","put","id","remove","delete","React","require","LoginForm","handleLogin","setUsername","setPassword","onSubmit","onChange","target","value","type","BlogForm","createBlog","timeOutAlert","useState","newBlog","setNewBlog","submitHandle","event","preventDefault","title","author","url","state","text","className","TogglableVisibility","forwardRef","props","ref","visible","setVisible","hideOnVisible","display","showOnVisible","toggleVisibility","useImperativeHandle","style","onClick","buttonTitle","children","Blog","blogObject","removeBlogList","forLikeTest","setBlog","user","JSON","parse","localStorage","getItem","handleClickLike","toUpdateBlog","likes","blogServices","handleClickRemove","window","confirm","removeButton","borderStyle","margin","padding","name","BlogList","blogs","prototype","PropType","array","isRequired","func","map","key","Alert","alert","App","username","password","setUser","setBlogs","setAlert","blogFormRef","useRef","useEffect","then","sort","b","userObject","addBlog","current","concat","stringify","loginServices","setItem","console","log","setTimeout","removeItem","blogToRemove","newListBlogs","filter","ReactDom","render","document","getElementById"],"mappings":"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","file":"static/js/main.03f09d1e.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async credential => {\n    const response = await axios.post(baseUrl, credential)\n    return response.data\n}\n\nexport default { login }","import axios from 'axios'\nconst baseUrl = '/api/blogs'\n\nlet token = null\n\nconst setToken = newToken => {\n    token = `bearer ${newToken}`\n}\n\nconst getAll = async () => {\n    const request = await axios.get(baseUrl)\n    return request.data\n}\n\nconst create = async blog => {\n    const config = {\n        headers: { Authorization: token },\n    }\n    const response = await axios.post(baseUrl, blog, config)\n    return response.data\n}\n\nconst updateLikes = async blog => {\n    const config = {\n        headers: { Authorization: token },\n    }\n    const response = await axios.put(`${baseUrl}/${blog.id}`, blog, config)\n    return response.data\n}\n\nconst remove = async id => {\n    const config = {\n        headers: { Authorization: token },\n    }\n    const response = await axios.delete(`${baseUrl}/${id}`, config)\n    return response\n}\n\nexport default {\n    getAll,\n    create,\n    setToken,\n    updateLikes,\n    remove\n}","const React = require('react')\n\nconst LoginForm = ({ handleLogin, setUsername, setPassword }) => {\n    return (\n        <>\n            < h2 > log in to application</h2>\n            <form onSubmit={handleLogin}>\n                <div>\n                    username <input\n                        onChange={({ target }) => { setUsername(target.value) }}\n                        id='input-username'></input>\n                </div>\n                <div>\n                    password <input type=\"password\"\n                        onChange={({ target }) => { setPassword(target.value) }}\n                        id='input-password'></input>\n                </div>\n                <button type=\"submit\">login</button>\n            </form>\n        </>\n    )\n}\n\nexport default LoginForm","import React, { useState } from 'react'\n\nconst BlogForm = ({ createBlog, timeOutAlert }) => {\n    const [newBlog, setNewBlog] = useState(null)\n\n    const submitHandle = async (event) => {\n        event.preventDefault()\n        if (!newBlog || !newBlog.title || !newBlog.author || !newBlog.url) {\n            timeOutAlert({\n                state: false,\n                text: 'Missing blog\\'s atributes'\n            })\n            return\n        }\n        createBlog(newBlog)\n        setNewBlog(null)\n    }\n\n    return (\n        <>\n            <h3>create new</h3>\n            <form onSubmit={submitHandle}>\n                <div>\n                    title: <input\n                        value={newBlog?.title ?? ''}\n                        onChange={({ target }) => {\n                            setNewBlog({ ...newBlog, title: target.value })\n                        }} className='title'>\n\n                    </input>\n                </div>\n                <div>\n                    author: <input\n                        value={newBlog?.author ?? ''}\n                        onChange={({ target }) => { setNewBlog({ ...newBlog, author: target.value }) }}\n                        className='author'>\n\n                    </input>\n                </div>\n                <div>\n                    url: <input\n                        value={newBlog?.url ?? ''}\n                        onChange={({ target }) => { setNewBlog({ ...newBlog, url: target.value }) }}\n                        className='url'>\n\n                    </input>\n                </div>\n                <button type=\"submit\" id='submit-button'>create</button>\n            </form>\n        </>\n    )\n}\n\nexport default BlogForm","import React, { useState, useImperativeHandle } from 'react'\nimport PropTypes from 'prop-types'\n\nconst TogglableVisibility = React.forwardRef((props, ref) => {\n    const [visible, setVisible] = useState(false)\n\n    TogglableVisibility.propTypes = {\n        buttonTitle: PropTypes.string.isRequired\n    }\n\n    const hideOnVisible = { display: visible ? 'none' : '' }\n    const showOnVisible = { display: visible ? '' : 'none' }\n\n    const toggleVisibility = () => {\n        setVisible(!visible)\n    }\n\n    useImperativeHandle(ref, () => {\n        return {\n            toggleVisibility\n        }\n    })\n\n    return (\n        <>\n            <div style={hideOnVisible}>\n                <button\n                    type='button'\n                    onClick={toggleVisibility}>\n                    {props.buttonTitle}\n                </button>\n            </div>\n            <div style={showOnVisible} className=\"togglableContent\">\n                {props.children}\n                <button\n                    type='button'\n                    onClick={toggleVisibility}>\n                    Cancel\n            </button>\n            </div>\n        </>\n    )\n})\n\nexport default TogglableVisibility","import React, { useState } from 'react'\nimport TogglableVisibility from './toggleVisibility'\nimport blogServices from '../services/blog'\n\nconst Blog = ({ blogObject, removeBlogList, forLikeTest }) => {\n    const [blog, setBlog] = useState(blogObject)\n\n    const user = JSON.parse(localStorage.getItem('loggedBlogUser'))\n\n    const blogStyle = {\n        borderStyle: 'solid',\n        margin: '10px',\n        padding: '4px'\n    }\n\n    const handleClickLike = async event => {\n        event.preventDefault()\n        forLikeTest()\n        const toUpdateBlog = { ...blog, likes: blog.likes + 1 }\n        await blogServices.updateLikes(toUpdateBlog)\n\n        //? No checking the result of the PUT operation\n        setBlog(toUpdateBlog)\n    }\n\n    const handleClickRemove = async event => {\n        event.preventDefault()\n\n        const isOkRemove = window.confirm(`Remove blog ${blog.title} by ${blog.author}`)\n        if (isOkRemove) {\n            await blogServices.remove(blog.id)\n            removeBlogList(blog)\n        }\n    }\n\n    const removeButton = (\n        <div>\n            <button id='remove-button' type='button' onClick={handleClickRemove}>remove</button>\n        </div>\n    )\n\n    return (\n        <div className='blog' style={blogStyle}>\n            {blog.title}\n            < TogglableVisibility buttonTitle='view' >\n                <p>{blog.url}</p>\n                <p>likes {blog.likes}\n                    <button id='like-button' type='button'\n                        onClick={handleClickLike}>\n                        like\n                    </button></p>\n                <p> {blog.author}</p>\n                {user?.name === blog?.author && removeButton}\n            </TogglableVisibility >\n        </div >\n    )\n}\n\nexport default Blog","import React from 'react'\nimport Blog from './blog'\nimport PropType from 'prop-types'\n\nconst BlogList = ({ blogs, removeBlogList }) => {\n\n    BlogList.prototype = {\n        blogs: PropType.array.isRequired,\n        removeBlogList: PropType.func.isRequired\n    }\n\n    return (\n        <>\n            {\n                blogs.map(blog =>\n                    <div key={blog.id}>\n                        <Blog blogObject={blog}\n                            removeBlogList={removeBlogList}\n                            forLikeTest={() => { }} />\n                    </div>\n                )\n            }\n        </>\n    )\n}\n\nexport default BlogList","import React from 'react'\n\nconst Alert = ({ alert }) => {\n    return (\n        alert && <p className={alert.state ? 'alertGood' : 'alertBad'}>{alert.text}</p>\n    )\n}\n\nexport default Alert","import React, { useState, useEffect, useRef } from 'react'\nimport loginServices from './services/login'\nimport blogServices from './services/blog'\nimport './App.css'\nimport LoginForm from './components/loginForm'\nimport BlogForm from './components/blogForm'\nimport TogglableVisibility from './components/toggleVisibility'\nimport BlogList from './components/blogList'\nimport Alert from './components/alert'\n\nconst App = () => {\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [user, setUser] = useState(null)\n  const [blogs, setBlogs] = useState([])\n  const [alert, setAlert] = useState(null)\n\n  const blogFormRef = useRef()\n\n  useEffect(() => {\n    blogServices.getAll().then(blogs => {\n      blogs.sort((a, b) => b.likes - a.likes)\n      setBlogs(blogs)\n    })\n  }, [])\n\n  useEffect(() => {\n    const user = window.localStorage.getItem('loggedBlogUser')\n    if (user) {\n      const userObject = JSON.parse(user)\n      setUser(userObject)\n      blogServices.setToken(user.token)\n    }\n  }, [])\n\n  const addBlog = async (blogObject) => {\n    const response = await blogServices.create(blogObject)\n    blogFormRef.current.toggleVisibility()\n\n    if (response) {\n      setBlogs(blogs.concat(response))\n      timeOutAlert({\n        state: true,\n        text: `${JSON.stringify(blogObject.title)} created successfully`\n      })\n    }\n  }\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n    try {\n      const user = await loginServices.login({ username, password })\n      if (user) {\n        window.localStorage.setItem('loggedBlogUser', JSON.stringify(user))\n        blogServices.setToken(user.token)\n        setUser(user)\n\n        timeOutAlert({\n          state: true,\n          text: 'Logged successfully'\n        })\n      }\n    } catch (error) {\n      timeOutAlert({\n        state: false,\n        text: 'Invalid username or password'\n      })\n      console.log(error)\n    }\n  }\n\n  const handleLogOut = () => {\n    window.localStorage.removeItem('loggedBlogUser')\n    setUser(null)\n    timeOutAlert({\n      state: true,\n      text: 'logout successfully'\n    })\n  }\n\n  const timeOutAlert = (alert) => {\n    setAlert(alert)\n    setTimeout(() => {\n      setAlert(null)\n    }, 5000)\n  }\n\n  const removeBlogFromList = blogToRemove => {\n    const newListBlogs = blogs.filter(blog => blog.id !== blogToRemove.id)\n    console.log(newListBlogs)\n    setBlogs(newListBlogs)\n  }\n\n  return (\n    <>\n      <Alert alert={alert} />\n      {\n        user !== null\n          ?\n          <>\n            <h2>blogs</h2>\n            {user?.username} logged in\n            <button onClick={handleLogOut}>logout</button>\n            <TogglableVisibility buttonTitle='new note' ref={blogFormRef}>\n              <BlogForm createBlog={addBlog} timeOutAlert={timeOutAlert} />\n            </TogglableVisibility>\n            <BlogList blogs={blogs} removeBlogList={removeBlogFromList} />\n          </>\n          : <LoginForm\n            handleLogin={handleLogin}\n            setUsername={setUsername}\n            setPassword={setPassword}\n          />\n      }\n    </>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDom from 'react-dom'\nimport App from './App'\n\nReactDom.render(<App />, document.getElementById('root'))"],"sourceRoot":""}