(this["webpackJsonpbloglist-fronted"]=this["webpackJsonpbloglist-fronted"]||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(16),l=n.n(u),c=n(5),o=n(2),i=n.n(o),s=n(3),p=n(4),f=n(6),v=n.n(f),m={login:function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=null,b={getAll:function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/blogs");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(s.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:g}},e.next=3,v.a.post("/api/blogs",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){g="bearer ".concat(e)}},d=function(e){var t=e.blog;return r.a.createElement("p",null,t.title," ",t.author)},E=(n(40),function(){var e,t,n,u=Object(a.useState)(""),l=Object(p.a)(u,2),o=l[0],f=l[1],v=Object(a.useState)(""),g=Object(p.a)(v,2),E=g[0],h=g[1],O=Object(a.useState)(null),j=Object(p.a)(O,2),w=j[0],x=j[1],k=Object(a.useState)([]),y=Object(p.a)(k,2),S=y[0],C=y[1],B=Object(a.useState)(null),F=Object(p.a)(B,2),I=F[0],J=F[1],N=Object(a.useState)(null),T=Object(p.a)(N,2),A=T[0],U=T[1];Object(a.useEffect)((function(){b.getAll().then((function(e){C(e)}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogUser");if(e){var t=JSON.parse(e);x(t),b.setToken(e.token)}}),[]);var D=function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,m.login({username:o,password:E});case 4:(n=e.sent)&&(window.localStorage.setItem("loggedBlogUser",JSON.stringify(n)),b.setToken(n.token),x(n),q({state:!0,text:"Logged successfully"})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),q({state:!1,text:"Invalid username or password"}),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),I&&I.title&&I.author&&I.url){e.next=4;break}return q({state:!1,text:"Missing blog's atributes"}),e.abrupt("return");case 4:return e.next=6,b.create(I);case 6:(n=e.sent)&&(C(S.concat(n)),J(null),q({state:!0,text:"".concat(JSON.stringify(I.title)," created successfully")}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null," log in to application"),r.a.createElement("form",{onSubmit:D},r.a.createElement("div",null,"username ",r.a.createElement("input",{onChange:function(e){var t=e.target;f(t.value)}})),r.a.createElement("div",null,"password ",r.a.createElement("input",{type:"password",onChange:function(e){var t=e.target;h(t.value)}})),r.a.createElement("button",{type:"submit"},"login"))),L=r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"blogs"),null===w||void 0===w?void 0:w.username," logged in",r.a.createElement("button",{onClick:function(){window.localStorage.removeItem("loggedBlogUser"),x(null),q({state:!0,text:"logout successfully"})}},"logout"),S.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(d,{blog:e}))}))),M=r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:z},r.a.createElement("div",null,"title: ",r.a.createElement("input",{value:null!==(e=null===I||void 0===I?void 0:I.title)&&void 0!==e?e:"",onChange:function(e){var t=e.target;J(Object(c.a)(Object(c.a)({},I),{},{title:t.value}))}})),r.a.createElement("div",null,"author: ",r.a.createElement("input",{value:null!==(t=null===I||void 0===I?void 0:I.author)&&void 0!==t?t:"",onChange:function(e){var t=e.target;J(Object(c.a)(Object(c.a)({},I),{},{author:t.value}))}})),r.a.createElement("div",null,"url: ",r.a.createElement("input",{value:null!==(n=null===I||void 0===I?void 0:I.url)&&void 0!==n?n:"",onChange:function(e){var t=e.target;J(Object(c.a)(Object(c.a)({},I),{},{url:t.value}))}})),r.a.createElement("button",{type:"submit"},"create"))),q=function(e){U(e),setTimeout((function(){U(null)}),5e3)};return r.a.createElement(r.a.Fragment,null,A&&r.a.createElement("p",{className:A.state?"alertGood":"alertBad"},A.text),null!==w?r.a.createElement(r.a.Fragment,null,L,M):G)});l.a.render(r.a.createElement(E,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.919b5b5a.chunk.js.map